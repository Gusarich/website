<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{title}}</title>
    <meta name="author" content="Daniil Sedov">
    <meta name="description" content="{{description}}">
    <meta name="keywords" content="{{keywords}}">
    <meta name="creator" content="gusarich.com">
    <meta name="subject" content="{{description}}">
    <style>
        @page {
            size: A4;
            margin: 2.5cm;
            @bottom-center {
                content: counter(page);
                font-family: 'Inter', -apple-system, sans-serif;
                font-size: 9pt;
                color: #999;
                padding-top: 0.5em;
            }
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: #1a1a1a;
            font-size: 10pt;
        }
        
        h1 {
            font-size: 22pt;
            font-weight: 700;
            margin-bottom: 0.5em;
            color: #000;
            page-break-after: avoid;
        }
        
        h2 {
            font-size: 16pt;
            font-weight: 600;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
            color: #1a1a1a;
            page-break-after: avoid;
        }
        
        h3 {
            font-size: 13pt;
            font-weight: 600;
            margin-top: 1.2em;
            margin-bottom: 0.5em;
            color: #333;
            page-break-after: avoid;
        }
        
        h4 {
            font-size: 11pt;
            font-weight: 600;
            margin-top: 1em;
            margin-bottom: 0.5em;
            color: #444;
            page-break-after: avoid;
        }
        
        p {
            margin: 0.8em 0;
            text-align: justify;
            orphans: 4;
            widows: 4;
            page-break-inside: auto;
        }
        
        ul, ol {
            margin: 0.8em 0;
            padding-left: 2em;
        }
        
        li {
            margin: 0.3em 0;
            line-height: 1.5;
            page-break-inside: avoid;
        }
        
        /* Nested lists */
        li > ul,
        li > ol {
            margin-top: 0.3em;
            margin-bottom: 0.3em;
            padding-left: 1.5em;
        }
        
        /* Bullet styles */
        ul li {
            list-style-type: disc;
        }
        
        ul ul li {
            list-style-type: circle;
        }
        
        ul ul ul li {
            list-style-type: square;
        }
        
        /* Nested items slightly smaller */
        li li {
            font-size: 9.5pt;
        }
        
        code {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Consolas', monospace;
            font-size: 9pt;
            background-color: #f8f8f8;
            padding: 0.15em 0.3em;
            border-radius: 3px;
            border: 1px solid #e8e8e8;
        }
        
        pre {
            background-color: #f8f8f8;
            border: 1px solid #d8d8d8;
            border-radius: 4px;
            padding: 12px 16px;
            margin: 1em 0;
            overflow-x: auto;
            page-break-inside: avoid;
            line-height: 1.45;
        }
        
        pre code {
            display: block;
            background-color: transparent;
            border: none;
            padding: 0;
            font-size: 8.5pt;
            line-height: 1.45;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: break-all;
            overflow-wrap: break-word;
        }
        
        /* Figure and image styling */
        figure {
            margin: 1.5em 0;
            text-align: center;
            page-break-inside: avoid;
        }
        
        figure img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
            border: 1px solid #e0e0e0;
        }
        
        figcaption {
            margin-top: 0.5em;
            font-size: 9pt;
            color: #555;
            font-style: italic;
            text-align: center;
        }
        
        /* Standalone images (not in figures) */
        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 1em auto;
            page-break-inside: avoid;
        }
        
        a {
            color: #0066cc;
            text-decoration: none;
        }
        
        /* Don't show URLs for internal links */
        a[href^="/"]::after,
        a[href^="#"]::after {
            content: "";
        }
        
        /* Show shortened URLs in references */
        .references-section a::after {
            content: " (" attr(data-domain) ")";
            font-size: 8pt;
            color: #888;
            font-style: italic;
        }
        
        /* Hide the after content if no data-domain */
        .references-section a:not([data-domain])::after {
            content: "";
        }
        
        blockquote {
            border-left: 4px solid #ddd;
            margin: 1em 0;
            padding-left: 1em;
            color: #666;
            font-style: italic;
        }
        
        strong {
            font-weight: 600;
        }
        
        em {
            font-style: italic;
        }
        
        .header {
            margin-bottom: 3.5em;
            padding-bottom: 0;
            text-align: center;
            position: relative;
        }
        
        .title {
            font-size: 28pt;
            font-weight: 800;
            margin-bottom: 1em;
            margin-top: 1em;
            color: #111;
            letter-spacing: -0.03em;
            line-height: 1.15;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        
        .subtitle {
            font-size: 11pt;
            color: #666;
            margin-bottom: 1.8em;
            line-height: 1.6;
            font-weight: 400;
            font-style: normal;
            max-width: 85%;
            margin-left: auto;
            margin-right: auto;
        }
        
        .metadata {
            font-size: 10pt;
            color: #888;
            margin-top: 0;
            padding-top: 1.2em;
            border-top: 1px solid #e5e5e5;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .authors {
            font-weight: 500;
            color: #444;
            font-size: 10pt;
            text-align: left;
        }
        
        .author {
            font-weight: 500;
            color: #444;
        }
        
        /* Support for multiple authors */
        .author + .author::before {
            content: ", ";
        }
        
        .author:last-child:not(:first-child)::before {
            content: " and ";
        }
        
        .author:nth-last-child(2) ~ .author::before {
            content: "";
        }
        
        .date {
            font-weight: 400;
            color: #888;
            font-size: 10pt;
            text-align: right;
        }
        
        .references-section {
            margin-top: 3em;
            page-break-before: auto;
            border-top: 1px solid #ddd;
            padding-top: 1.5em;
        }
        
        .references-section h2 {
            font-size: 13pt;
            font-weight: 600;
            margin-bottom: 1em;
        }
        
        .references-list {
            list-style: none;
            padding-left: 0;
            counter-reset: reference-counter;
        }
        
        .reference-item {
            margin: 0.8em 0;
            font-size: 9pt;
            page-break-inside: avoid;
            position: relative;
            padding-left: 2em;
            text-align: justify;
            counter-increment: reference-counter;
        }
        
        .reference-item::before {
            content: "[" counter(reference-counter) "]";
            position: absolute;
            left: 0;
            font-weight: 500;
        }
        
        /* Style for reference links in text */
        .reference-link {
            color: #0066cc;
            text-decoration: none;
            font-weight: 500;
        }
        
        .reference-link:hover {
            text-decoration: underline;
        }
        
        .ref-authors {
            font-variant: small-caps;
            letter-spacing: 0.02em;
        }
        
        .ref-year {
            font-weight: 500;
        }
        
        .ref-title {
            font-weight: 500;
        }
        
        .ref-title a {
            color: inherit;
            text-decoration: none;
        }
        
        .ref-venue {
            font-style: italic;
            color: #333;
        }
        
        .ref-pages {
            color: #555;
        }
        
        /* Hide theme-specific images in PDF */
        img[data-base-src] {
            content: attr(data-base-src);
        }
        
        /* Table of Contents styling */
        .toc {
            margin: 2em 0 3em 0;
            padding: 0;
            page-break-after: always;
        }
        
        .toc-heading {
            font-size: 16pt;
            font-weight: 600;
            margin: 0 0 1.5em 0;
            color: #111;
            text-align: left;
            letter-spacing: -0.01em;
        }
        
        .toc-content {
            margin: 0;
            padding: 0;
        }
        
        /* TOC entries */
        .toc-entry {
            display: flex;
            align-items: baseline;
            margin: 0.5em 0;
            padding: 0;
            page-break-inside: avoid;
            line-height: 1.8;
            text-decoration: none;
            color: inherit;
        }
        
        /* Main sections */
        .toc-h2 {
            font-size: 11pt;
            font-weight: 500;
        }
        
        .toc-h2:first-child {
            margin-top: 0;
        }
        
        /* Subsections */
        .toc-h3 {
            font-size: 10.5pt;
            font-weight: 400;
        }
        
        
        /* Subsubsections */
        .toc-h4 {
            font-size: 10pt;
            font-weight: 400;
            color: #555;
        }
        
        
        /* Section numbering */
        .toc-number {
            flex: 0 0 auto;
            min-width: 1.5em;
            padding-right: 0.3em;
            font-weight: inherit;
            color: #333;
            text-align: left;
        }
        
        .toc-h3 .toc-number {
            min-width: 2em;
            margin-left: 1.5em;
        }
        
        .toc-h4 .toc-number {
            min-width: 2.5em;
            margin-left: 3em;
            color: #666;
        }
        
        /* Title text */
        .toc-text {
            flex: 0 0 auto;
            padding-right: 0.5em;
            color: #333;
        }
        
        /* Dotted line filler */
        .toc-dots {
            flex: 1 1 auto;
            border-bottom: 1px dotted #999;
            margin: 0 0.5em 0.35em 0.5em;
            min-width: 1em;
        }
        
        
        /* Put page number directly on the anchor */
        a.toc-entry[href]::after {
            content: target-counter(attr(href), page);
            position: absolute;
            right: 0;
            font-variant-numeric: tabular-nums;
        }
        
        a.toc-entry {
            position: relative;
        }
        
        /* Hover effect */
        .toc-entry:hover .toc-text,
        .toc-entry:hover .toc-number {
            color: #0066cc;
        }
        
        .toc-entry:hover::after {
            color: #0066cc;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1 class="title">{{title}}</h1>
        <div class="subtitle">{{description}}</div>
        <div class="metadata">
            <div class="authors">
                <span class="author">Daniil Sedov</span>
            </div>
            <div class="date">{{formatted_date}}</div>
        </div>
    </div>
    
    <div class="content">
        {{content}}
    </div>
</body>
</html>